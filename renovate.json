{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    "helpers:pinGitHubActionDigests"
  ],
  "enabledManagers": [
    "dockerfile",
    "docker-compose",
    "helm-values",
    "kubernetes",
    "regex",
    "flux"
  ],
  "kubernetes": {
    "fileMatch": [
      "(^|/)k3s/.*\\.ya?ml$",
      "(^|/)k3s/.*\\.yaml$",
      "(^|/)k3s/.*\\.yml$",
      "(^|/)ansible/.*\\.ya?ml$"
    ]
  },
  "flux": {
    "fileMatch": [
      "(^|/)k3s/.*\\.ya?ml$"
    ]
  },
  "helm-values": {
    "fileMatch": [
      "(^|/)k3s/.*\\.ya?ml$"
    ]
  },
  "regexManagers": [
    {
      "fileMatch": [
        "(^|/)k3s/.*\\.ya?ml$"
      ],
      "matchStrings": [
        "image:\\s*(?<depName>[a-z0-9\\-_.:/]+)\\:(?<currentValue>[a-zA-Z0-9._\\-+]+)\\b"
      ],
      "datasourceTemplate": "docker",
      "versioningTemplate": "loose"
    }
  ],
  "packageRules": [
    {
      "matchDatasources": [
        "docker"
      ],
      "ignoreUnstable": true,
      "allowedVersions": "^(?:(?!alpha|beta|rc|snapshot|pre|preview|canary|next|nightly|dev|edge|testing|unstable)[^\\s]+)$"
    },
    {
      "matchDatasources": [
        "docker"
      ],
      "matchPackagePatterns": [
        "(?i)^ghcr\\.io/linuxserver/.*",
        "(?i)^linuxserver/.*"
      ],
      "allowedVersions": "^[0-9]+(\\.[0-9]+){0,3}([._-]ls[0-9]+)?$",
      "ignoreUnstable": true
    },
    {
      "matchDatasources": [
        "docker"
      ],
      "ignoreVersions": [
        "(?i)(?:^|[._-])(alpha|beta|rc|snapshot|pre|preview|canary|next|nightly)(?:[._-]\\d+)?$",
        "(?i)\\b(dev|edge|testing|unstable)\\b",
        "^(latest|master|main)$"
      ]
    },
    {
      "matchDatasources": [
        "docker"
      ],
      "groupName": "container image patches",
      "matchUpdateTypes": [
        "patch"
      ],
      "automerge": true,
      "automergeType": "branch",
      "platformAutomerge": true,
      "stabilityDays": 1
    },
    {
      "matchDatasources": [
        "docker"
      ],
      "groupName": "container image minor/major updates",
      "matchUpdateTypes": [
        "minor",
        "major"
      ],
      "automerge": false,
      "prCreation": "immediate"
    },
    {
      "matchDatasources": [
        "docker"
      ],
      "registryUrls": [
        "https://ghcr.io",
        "https://index.docker.io/v1/"
      ]
    }
  ],
  "prHourlyLimit": 6,
  "prConcurrentLimit": 10,
  "rangeStrategy": "replace",
  "separateMultipleMajor": true,
  "dependencyDashboard": true,
  "labels": [
    "dependencies",
    "renovate",
    "containers"
  ]
}
